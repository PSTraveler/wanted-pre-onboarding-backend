# 프리온보딩 백엔드 인턴십 사전 과제

---

# # 요구 사항

- **해당 API 사용자는 두 가지 그룹으로 분류된다 :**
    1. 회사
    2. 사용자

- **필요한 데이터베이스 모델은 다음과 같다 :**
    1. 회사
    2. 사용자
    3. 채용공고
    4. 지원 내역

- **구현되어야 하는 필수 기능은 다음과 같다 :**
    1. 채용공고 등록, 수정, 삭제, 전체 조회, 상세 조회, 검색
    2. 사용자 채용공고 지원

---

# # 기술 사양

- **사용 언어 및 프레임워크** **:** Javascript & Node.js
- **RDBMS :** SQLite3
- **사용 패키지 :** express, Sequelize, dotenv 등

---

# # 데이터베이스 구조

### 속성

- **회사 :** **회사_id**, 회사명, 국가, 지역
- **채용공고 : 채용공고_id**, 채용포지션, 채용보상금, 채용내용, 사용기술
- **사용자 : 사용자_id**

### 관계

- **회사 - 채용공고 :** 1대N 관계
- **사용자 - 채용공고 :** N대M 관계 (**UserRecruits** 모델 생성)

---

# # API Reference

## 1) 서버 구동

- **개발 / 출시 시 :**

```powershell
npm start
```

- **테스트 시 :**

```powershell
npm test
```

***포트 번호 : 3000**

*테스트 구동 시 .database.sqlite3 파일을 사용하지 않고 메모리에 DB 구축.

## 2) API 요청

### A. 회사

- **등록 :** 다음과 같은 형식의 **JSON** 데이터를 body에 담아 **/company/insert** 에 **POST** 요청, 성공 시 상태 코드 **200** 및 해당 데이터 반환, 중복된 회사 정보 또는 실패 시 상태 코드 **400** 반환.

```json
{
	"회사_id" : "UUIDv1, 생략 시 자동 생성", 
	"회사명" : "string",
	"국가" : "string",
	"지역" : "string"
}
```

- **조회 :** **/company** 에 **GET** 요청 시 전체 조회, **/company/:id** 의 **:id** 파라미터에 1 이상의 정수 입력 시 해당 인덱스의 회사 정보 조회.
- **삭제 :** **/company/:id/delete** 에 **DELETE** 요청 시 ****해당 인덱스의 회사 정보 및 해당 회사가 작성한 채용공고 삭제, 성공 시 상태 코드 **200** 반환, 실패 시 상태 코드 **400** 반환.
- **채용공고 등록 :** 다음과 같은 형식의 **JSON** 데이터를 body에 담아 **/company/:id/recruit/insert** 에 **POST** 요청, **:id** 파라미터에는 특정 회사의 인덱스 입력. 성공 시 상태 코드 **200** 및 해당 채용공고 데이터 반환, 실패 시 상태 코드 **400** 반환.

```json
{
	"채용공고_id" : "UUIDv1, 생략 시 자동 생성",
	"채용포지션" : "string",
	"채용보상금" : "number",
	"채용내용" : "string",
	"사용기술" : "string"
}
```

### B. 채용공고

- **조회 :** **/recruit** 에 **GET** 요청 시 전체 조회, **/recruit/:id** 의 **:id** 파라미터에 **UUIDv1** 입력 시 해당 값을 **채용공고_id**로 가지는 채용공고 상세 조회. 상세 조회 시 해당 채용공고를 올린 회사의 다른 채용공고에 대한 **채용공고_id** **리스트** 추가 제공.
- **수정 :** **/recruit/:id/modify** 에 **채용공고_id를 제외한** 나머지 속성 중 수정하고자 하는 데이터를 **JSON** 형식으로 body에 담아 **PATCH** 요청, **:id** 파라미터에는 특정 채용공고의 **채용공고_id** 입력. 성공 시 상태 코드 **200** 및 수정된 채용공고 데이터 반환, 실패 시 상태 코드 **400** 반환.
- **삭제 :** **/recruit/:id/delete** 에 **DELETE** 요청 시 해당 **채용공고_id**를 가지는 채용공고 삭제, 성공 시 상태 코드 **200** 반환, 실패 시 상태 코드 **400** 반환.
- **검색 : /recruit?search=value** 의 쿼리 파라미터에서 검색하고자 하는 키워드를 **value**로 담은 **GET** 요청 시 해당 value 값을 포함하는 **채용포지션, 채용내용, 사용기술** 속성을 검색, 성공 시 상태 코드 **200** 및 검색된 채용공고 데이터 리스트 반환, 실패 시 상태 코드 **400** 반환.

### C. 사용자

- **등록:** **/user/create** 에 **GET** 요청 시 임의의 **UUIDv1** 값을 **사용자_id**로 가지는 사용자 정보 생성, 성공 시 상태 코드 **200** 및 해당 사용자 데이터 반환, 실패 시 상태 코드 **400** 반환.
- **조회:** **/user** 에 **GET** 요청 시 전체 조회, **/user/:id** 의 **:id** 파라미터에 1 이상의 정수 입력 시 해당 인덱스의 사용자 정보 조회.
- **채용공고 지원: /user/:id/apply/:recruit** 에 **GET** 요청 시 **:id** 인덱스의 사용자가 **:recruit**의 **채용공고_id**를 가지는 채용공고에 지원. 해당 사용자의 **사용자_id**와 **채용공고_id**는 **UserRecruits** 테이블에 입력됨. 성공 시 상태 코드 **200** 및 **UserRecruit**의 해당 지원 내역 데이터 반환, 중복 지원 또는 실패 시 상태 코드 **400** 반환.

---

# # Unit Test

## 1) 서버 테스트 모드 구동

- **npm test** 실행

## 2) Postman

- **postman/collections/Unit Test.json**을 Import한 후 **Run collection** 실행
- **테스트 목록 :**
    1. **회사 1** 데이터 등록
    2. **회사 2** 데이터 등록
    3. **회사 2** 데이터 중복 등록: **실패**
    4. **회사 1**의 첫 번째 채용공고 등록
    5. **회사 1**의 두 번째 채용공고 등록
    6. **회사 2**의 첫 번째 채용공고 등록
    7. **회사 2**의 두 번째 채용공고 등록
    8. **회사 1**의 첫 번째 채용공고 수정
    9. 특정 키워드로 채용공고 검색
    10. **사용자 1** 등록
    11. **사용자 1**의 **회사 1** 첫 번째 채용공고 지원
    12. **회사 1**의 첫 번째 채용공고 삭제
- **회사 1**의 첫 번째 채용공고는 **회사_id** 값을 직접 지정해주면서 이후의 채용공고 수정, 삭제 및 채용공고 지원 기능 테스트 시 해당 값을 활용함.
